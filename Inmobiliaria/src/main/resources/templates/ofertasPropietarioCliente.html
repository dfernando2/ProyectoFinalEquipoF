<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="es" data-bs-theme="dark" xmlns="http://www.w3.org/1999/html">
<head th:replace="/fragments/head :: head"></head>
<nav th:replace="/fragments/navbar :: nav"></nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<body>

<div class="card">
    <div class="card-body text-center">
        <h3>PROPIEDADES</h3>
        <!--            <h3 th:if="${session.usuariosession != null}" th:text="'Â¡Bienvenido de vuelta! ' + ${session.usuariosession.nombre}">-->
    </div>
</div>
<div class="card text-white bg-success mb-3 mt-3 mensajeExito" th:if="${exito != null}">
    <div class="card-body">
        <h5 class="card-title">Exito!</h5>
        <p class="card-text" th:text="${exito}"></p>
    </div>
</div>
<div class="d-block mb-4" th:if="${error!=null}">
    <p class="login-error w-50" th:text="${error}"></p>
</div>

<div class="card center container">

    <table class="table">
        <thead>
        <tr>
            <th scope="col">Direccion de la propiedad</th>
            <th scope="col">Precio propiedad</th>
            <th scope="col">Descripcion de la propiedad</th>
            <th scope="col">Dia oferta</th>
            <th scope="col">Precio ofrecido</th>
            <th scope="col">Contacto cliente</th>
            <th scope="col">Estado</th>
        </tr>
        </thead>
        <tbody th:each="inmueble : ${inmuebles}" th:each="offer : ${offers}">
        <tr>

            <th th:text="${inmueble.address}"></th>
            <td th:text="${inmueble.price}"></td>
            <td th:text="${inmueble.description}"></td>
            <td th:text="${offer.creationDate}"></td>
            <td th:text="${offer.price}"></td>
            <td th:text="${offer.contact}"></td>
            <td th:text="${offer.offerStatus.name() == 'CLIENT_OFFER'}
                                ?'Pendiente':
                                (${offer.offerStatus.name() == 'ENTITY_ACCEPTED'}
                                ?'Confirmado':(${offer.offerStatus.name() == 'ENTITY_REJECTED'}
                                ?'Rechazado' : 'Finalizado')
                                )">


            <td class="nav-item dropdown">

                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                    Elige
                </a>
                <ul class="dropdown-menu">
                    <li><a th:href="@{/dashboard/inmuebles/editar/__${inmueble.id}__}" class="dropdown-item">Editar</a>
                    </li>
                    <li><a class="dropdown-item" th:href="@{/dashboard/inmuebles/remove/__${inmueble.id}__}">Dar de
                        baja</a></li>

                </ul>
            </td>

        </tr>

        </tbody>
    </table>

</div>
<footer th:replace="/fragments/footer :: footer"></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>

